---
const { email = "coderdeltalan.cargo784@8alias.com", label = "Contact" } = Astro.props;
---
<button
  class="px-4 py-2 rounded-2xl shadow text-sm font-medium border border-white/10 bg-white/5 hover:bg-white/10 transition"
  aria-label="Copy email to clipboard"
  data-email={email}>
  {label}: <code class="ml-1">{email}</code>
</button>

<script is:inline>
  const btn = document.currentScript.previousElementSibling;
  btn?.addEventListener('click', async () => {
    const email = btn?.dataset?.email || '';
    try {
      await navigator.clipboard.writeText(email);
      toast('Email copied to clipboard');
    } catch {
      toast('Copy failed. Select and copy manually.');
    }
  });

  function toast(message){
    let host = document.getElementById('toast-host');
    if (!host) {
      host = document.createElement('div');
      host.id = 'toast-host';
      host.style.position = 'fixed';
      host.style.top = '16px';
      host.style.left = '50%';
      host.style.transform = 'translateX(-50%)';
      host.style.zIndex = '9999';
      document.body.appendChild(host);
    }
    const el = document.createElement('div');
    el.textContent = message;
    el.style.padding = '10px 14px';
    el.style.marginTop = '8px';
    el.style.borderRadius = '12px';
    el.style.background = 'rgba(30,30,36,0.95)';
    el.style.color = '#fff';
    el.style.boxShadow = '0 6px 20px rgba(0,0,0,0.35)';
    el.style.fontSize = '14px';
    el.style.backdropFilter = 'blur(6px)';
    host.appendChild(el);
    setTimeout(() => {
      el.style.transition = 'opacity 300ms ease';
      el.style.opacity = '0';
      setTimeout(() => el.remove(), 320);
    }, 1600);
  }
</script>
